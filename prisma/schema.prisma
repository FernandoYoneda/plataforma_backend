generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")         // runtime (pooler)
  directUrl = env("DIRECT_DATABASE_URL")  // migrations (conex√£o direta)
}

model User {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
  role     String
}

model Order {
  id          Int      @id @default(autoincrement())
  item        String
  sector      String
  nameOrStore String
  createdAt   DateTime @default(now())
  status      String   @default("aberto")
  response    String?
  obs         String?
  quantity    Int      @default(1)

  @@index([createdAt(sort: Desc)], map: "idx_order_createdat")
  @@index([nameOrStore], map: "idx_order_nameorstore")
  @@index([sector], map: "idx_order_sector")
  @@index([status], map: "idx_order_status")
}

model TiTicket {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  sector      String
  nameOrStore String
  status      String   @default("aberto")
  response    String?
  createdAt   DateTime @default(now())

  @@index([createdAt(sort: Desc)], map: "idx_titicket_createdat")
  @@index([nameOrStore], map: "idx_titicket_nameorstore")
  @@index([sector], map: "idx_titicket_sector")
  @@index([status], map: "idx_titicket_status")
}

model Settings {
  id          Int    @id @default(1)
  sector      String
  nameOrStore String
}
